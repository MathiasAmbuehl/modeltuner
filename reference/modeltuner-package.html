<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='modeltuner is a package designed for evaluation of predictive performance of statistical models and hyperparameter tuning
based on cross-validation. The current version of the package supports models with a continuous or binary (0/1) response.
In this help topic, the main conceptual elements of the package are introduced and explained.
The package also offers some particularly attractive tools for handling what is called iteratively fitted models (IFM) here.
For such a model, the fitting process returns not just one single model (or model parameterization),
but rather a range of models (or model parameterizations) of increasing structural complexity.
Prominent examples (and currently the only instances implemented in the package) are
gradient boosting (as implemented in package xgboost) and Lasso regression and elastic nets (available from package glmnet).
Refer to the dedicated help topic (ifm) and vignette (vignette("ifm")) for more information.'><title>modeltuner package overview — modeltuner-package • modeltuner</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="modeltuner package overview — modeltuner-package"><meta property="og:description" content='modeltuner is a package designed for evaluation of predictive performance of statistical models and hyperparameter tuning
based on cross-validation. The current version of the package supports models with a continuous or binary (0/1) response.
In this help topic, the main conceptual elements of the package are introduced and explained.
The package also offers some particularly attractive tools for handling what is called iteratively fitted models (IFM) here.
For such a model, the fitting process returns not just one single model (or model parameterization),
but rather a range of models (or model parameterizations) of increasing structural complexity.
Prominent examples (and currently the only instances implemented in the package) are
gradient boosting (as implemented in package xgboost) and Lasso regression and elastic nets (available from package glmnet).
Refer to the dedicated help topic (ifm) and vignette (vignette("ifm")) for more information.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">modeltuner</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/modeltuner.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ifm.html">Fitting and tuning Iteratively Fitted Models</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>modeltuner package overview</h1>
      
      <div class="d-none name"><code>modeltuner-package.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><strong>modeltuner</strong> is a package designed for evaluation of predictive performance of statistical models and hyperparameter tuning
based on cross-validation. The current version of the package supports models with a continuous or binary (0/1) response.</p>
<p>In this help topic, the main conceptual elements of the package are introduced and explained.</p>
<p>The package also offers some particularly attractive tools for handling what is called <strong>iteratively fitted models (IFM)</strong> here.
For such a model, the fitting process returns not just one single model (or model parameterization),
but rather a range of models (or model parameterizations) of increasing structural complexity.
Prominent examples (and currently the only instances implemented in the package) are
gradient boosting (as implemented in package <strong>xgboost</strong>) and Lasso regression and elastic nets (available from package <strong>glmnet</strong>).
Refer to the dedicated help topic (<a href="ifm.html">ifm</a>) and vignette (<code><a href="../articles/ifm.html">vignette("ifm")</a></code>) for more information.</p>
    </div>


    <div class="section level2">
    <h2 id="overview-and-workflow">Overview and workflow<a class="anchor" aria-label="anchor" href="#overview-and-workflow"></a></h2>
    

<p>The package's key concept is the class “model”. If you have a fitted model called <code>myfm</code>, say,  (e.g., a linear model),
you convert it to a “model” object by simply typing <code>mymodel&lt;-model(myfm)</code>, which gives you access to the world of modeltuner.
<code><a href="model.html">model()</a></code> is designed for model classes being based on the <code>formula</code>/<code>data</code> interface.</p>
<p>An analysis will typically comprise the following successive steps:</p><ol><li><p>First, you set up a base <strong>model</strong>, or several. This is done using the function <code><a href="model.html">model</a>()</code>.
Its output, an object of class “model”, includes the formula, the data, the call to the model fitting function,
optionally the fitting weights, and more components.
It contains the information needed to repeatedly refit the model under slightly modified conditions,
as is done in a cross-validation. It does <em>not</em> necessarily contain the actual fit of the model.
Properly distinguishing <em>fitted models</em> (e.g., an “lm”) and objects of class “model” is crucial for
a good understanding of how the functions in the modeltuner package work.</p></li>
<li><p>In many applications, you are not just considering a single model,
but you want to study and compare the predictive performance of several candidate models,
and/or you want to find optimal values of certain hyperparameters.
In order to do so, you combine several models or model parameterizations into a <strong>multimodel</strong>.
A “<a href="multimodel.html">multimodel</a>” is essentially a generalization of the class “model” to more than one model.</p></li>
<li><p>Next, you run a <strong>cross-validation</strong> procedure, by applying the function <code><a href="cv.html">cv()</a></code> to
a model or multimodel, thus obtaining an object of class “cv”.
This is the most time-consuming part of your analysis.
The key function to evaluate and display the contents of a “cv” object is <code><a href="cv_performance.html">cv_performance</a>()</code>,
which computes training and test errors of the model(s) under investigation.</p></li>
<li><p>To extract the best-performing model from a <code>cv</code>-object, you may use <code><a href="tune.html">tune</a>()</code>.
Alternatively, you might prefer to pick your favorite model manually. To do so, use <code><a href="extract_model.html">extract_model</a>()</code>.</p></li>
<li><p>Finally you may use <code><a href="fit.html">fit</a>()</code> to convert the selected model (an object of class “model”) back to a <em>fitted</em> model,
e.g. to a “lm” object, thereby leaving the modeltuner world.</p></li>
</ol><p>Not all of these steps are required in every analysis, and some steps may have to be executed repeatedly
before achieving satisfaction.</p>
<p><code>modeltuner</code> comes with a number of utility functions that are helpful for inspection and basic manipulations
of object of classes “model”, “multimodel”, “cv” and other:
<code><a href="label.html">label</a>()</code>, <code><a href="label.html">n_model</a>()</code>, <code><a href="extract_model.html">extract_model</a>()</code>, <code><a href="subset.html">subset</a>()</code>,
<code><a href="sort_models.html">sort_models</a>()</code>. These are all S3 generic functions with specific methods for these classes.</p>
<p>To complement this, the package has wrappers of a number of model fitting functions from other packages,
most notably to <code>glmnet()</code> and <code>xgb.train()</code>, that are based on a <code>formula</code>/<code>data</code> interface,
so that the resulting classes can be easily handled in the <code>modeltuner</code> framework.
See the help topics <code>?<a href="fm_glmnet.html">fm_glmnet</a></code>, <code>?<a href="fm_xgb.html">fm_xgb</a></code>, <code>?<a href="fm_knn.html">fm_knn</a></code>, <code>?<a href="fm_smooth_spline.html">fm_smooth_spline</a></code>,
<code>?<a href="fm_const.html">fm_const</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="models-and-multimodels">Models and multimodels<a class="anchor" aria-label="anchor" href="#models-and-multimodels"></a></h2>
    

<p><code>model(x, ...)</code> is a S3 generic function. The default method converts a fitted model, such as an “lm”, into an object of class
“model”. The original fitted model <code>x</code> must meet certain formal requirements,
e.g. its fitting function must have formal arguments <code>formula</code> and <code>data</code>, and it must have a <code>call</code> component.
The exact requirements are described in detail in <code>?<a href="model.html">model</a></code>, as well as the structure of a “model” object.</p>
<p>A multimodel combines several models in one object. There are two ways to create a <code>multimodel</code>.
Either you combine different “model” objects in a call <code>c(...)</code>, as in
<code>c(model1, model2, model3)</code>, or you run the (generic) function <code>multimodel(x, ...)</code>,
where <code>x</code> is a “model” or fitted model and the “...” specify alternative values of one or several (hyper-)parameters
of the model-fitting function.
Models combined in a <code>multimodel</code> must have identical responses.
See <code>?<a href="multimodel.html">multimodel</a></code> for more information and examples.</p>
    </div>
    <div class="section level2">
    <h2 id="folds">Folds<a class="anchor" aria-label="anchor" href="#folds"></a></h2>
    

<p>A set of “folds” is part of every model validation procedure executed with <code><a href="cv.html">cv()</a></code>. It defines the grouping pattern of the procedure.
Technically, an object of class “folds”, created by the function <code><a href="make_folds.html">make_folds()</a></code>,
is a list of integer vectors with special attributes. Each of these vectors defines a test set of observations in the model data.
In validation procedures, the complement of each test set is used as the corresponding training set.</p>
<p>Three (cross-)validation patterns are implemented:
Complete <code>n</code>-fold cross-validation, incomplete <code>n</code>-fold cross-validation,
and simple hold-out validation.
See <code>?<a href="make_folds.html">make_folds</a></code> for details.</p>
    </div>
    <div class="section level2">
    <h2 id="cv-and-cv-performance-"><code><a href="cv.html">cv()</a></code> and <code><a href="cv_performance.html">cv_performance()</a></code><a class="anchor" aria-label="anchor" href="#cv-and-cv-performance-"></a></h2>
    

<p>The function <code><a href="cv.html">cv</a>()</code> executes a validation procedure.
Its two main inputs are an object of class “model” or “multimodel” and a set of folds --
the result is an object of class “cv”.
By default, the model fits from the cross-validation are not saved as a part of the output,
but the predictions are saved and used in evaluation.</p>
<p>The main evaluation function for a “cv” object is <code><a href="cv_performance.html">cv_performance</a>()</code>.
Among its parameters are a <em>metric</em> (formal argument <code>metric</code>) and evaluation weights (<code>eval_weights</code>).:</p><ul><li><p><em>Metrics</em>: The default metric is <code><a href="metrics.html">rmse()</a></code> for a continuous response and <code><a href="metrics.html">logLoss()</a></code> for a binary response.
In <code>modeltuner</code>, we use metrics from the package <a href="https://CRAN.R-project.org/package=MetricsWeighted" class="external-link"><span class="pkg">MetricsWeighted</span></a>.
See the section “Metrics” below and <code>?<a href="metrics.html">metrics</a></code>.</p></li>
<li><p><em>Evaluation weights:</em>
We distinguish <em>fitting weights</em> --these are in action when a cross-validation is executed-- and
<em>evaluation weights</em>, that are a parameter in the evaluation of a cross-validation.
See the section on “Evaluation weights” later in this help topic.</p></li>
</ul><p>When executing <code><a href="cv.html">cv()</a></code>, the default <code>metric</code> and <code>eval_weights</code> are chose automatically and saved separately for each model.
They are thus not necessarily the same for all models in a <code>multimodel</code>.
However, each execution of <code><a href="cv_performance.html">cv_performance()</a></code> uses a common <code>metric</code> and a common <code>eval_weights</code>.</p>
<p>The help topic <code>?<a href="cv.html">cv</a></code> has more details, in particular on the structure of an object of class “cv”.</p>
    </div>
    <div class="section level2">
    <h2 id="evaluation-and-metrics">Evaluation and Metrics<a class="anchor" aria-label="anchor" href="#evaluation-and-metrics"></a></h2>
    

<p><code><a href="cv_performance.html">cv_performance</a>()</code> reports the training (in-sample) and test (out-of-sample) predictive performance
of the models included in the “cv” object by evaluating the <code>metric</code>.
It returns a <em>performance table</em>, an object of class “performance”, a <code>data.frame</code> with additional attributes
and a convenient <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method.</p>
<p>Roughly speaking, first the accuracy of (training and test) predictions are evaluated in each fold separately
and then these results are averaged. The help topic <code>?<a href="cv_performance.html">cv_performance</a></code> has more details.</p>
<p>A set of evaluation <em>metrics</em> from the package <a href="https://CRAN.R-project.org/package=MetricsWeighted" class="external-link"><span class="pkg">MetricsWeighted</span></a> is used in the package:</p><ul><li><p>Metrics for continuous response: <code><a href="https://rdrr.io/pkg/MetricsWeighted/man/regression.html" class="external-link">rmse</a></code>, <code><a href="https://rdrr.io/pkg/MetricsWeighted/man/regression.html" class="external-link">mse</a></code>,
<code><a href="https://rdrr.io/pkg/MetricsWeighted/man/regression.html" class="external-link">mae</a></code>, <code><a href="https://rdrr.io/pkg/MetricsWeighted/man/regression.html" class="external-link">medae</a></code>;</p></li>
<li><p>Modified metrics for binary response: <code><a href="metrics.html">logLoss</a></code>,
<code><a href="metrics.html">classification_error</a></code>.</p></li>
</ul><p>The two metrics for binary response are slightly modified in order to make them more convenient for use in the context of <code>modeltuner</code>.</p>
<p>All of these functions have formal arguments <code>actual</code>, <code>predicted</code> and, optionally, <code>weights</code>.
Alternative metrics may be used and must have these formal arguments, too.
You can use a metric having no <code>weights</code> argument, but evaluation will only work if <code>eval_weights</code> is <code>NULL</code>.</p>
<p>See <code>?<a href="metrics.html">metrics</a></code> for more details on metrics.</p>
    </div>
    <div class="section level2">
    <h2 id="evaluation-weights">Evaluation weights<a class="anchor" aria-label="anchor" href="#evaluation-weights"></a></h2>
    

<p>By default, a model's fitting <code>weights</code> are chosen as its default <code>eval_weights</code>.</p>
<p>The “model” objects included in a “cv” object can have different fitting and evaluation weights. If this is the case,
<code><a href="cv_performance.html">cv_performance</a>()</code> will use <code>eval_weights=NULL</code> by default.
This default can be overridden by the argument <code>eval_weights</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="tune-and-fit">Tune and fit<a class="anchor" aria-label="anchor" href="#tune-and-fit"></a></h2>
    

<p><code><a href="tune.html">tune</a>()</code> selects the best-performing model among those included in a “cv” object,
<code><a href="fit.html">fit</a>()</code> converts that “model” back to a <em>fitted model</em>, using the complete model data for the fit.</p>
<p>See <code>?<a href="tune.html">tune</a></code> and <code>?<a href="fit.html">fit</a></code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mathias Ambuehl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

