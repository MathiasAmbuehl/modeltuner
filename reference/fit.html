<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Fits the fitted model (such as lm) expressed in a &amp;#8220;model&amp;#8221; object using the complete model data.
In a way, fit() is the inverse operation of model().
add_fit() adds the model fit to a &amp;#8220;model&amp;#8221; object, as its component fit (if not already present).
The methods for classes &amp;#8220;multimodel&amp;#8221;  and &amp;#8220;cv&amp;#8221; similarly add the fitted models
to all included models.
has_fit() is a generic function that discerns whether a (multi-)model contains the
corresponding fitted model(s)."><title>Re-fit a model object using the complete model data — fit • modeltuner</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Re-fit a model object using the complete model data — fit"><meta property="og:description" content="Fits the fitted model (such as lm) expressed in a &amp;#8220;model&amp;#8221; object using the complete model data.
In a way, fit() is the inverse operation of model().
add_fit() adds the model fit to a &amp;#8220;model&amp;#8221; object, as its component fit (if not already present).
The methods for classes &amp;#8220;multimodel&amp;#8221;  and &amp;#8220;cv&amp;#8221; similarly add the fitted models
to all included models.
has_fit() is a generic function that discerns whether a (multi-)model contains the
corresponding fitted model(s)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">modeltuner</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/modeltuner.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ifm.html">Fitting and tuning Iteratively Fitted Models</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Re-fit a model object using the complete model data</h1>
      
      <div class="d-none name"><code>fit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fits the fitted model (such as <code>lm</code>) expressed in a “<a href="model.html">model</a>” object using the complete model data.
In a way, <code>fit()</code> is the inverse operation of <code><a href="model.html">model()</a></code>.</p>
<p><code>add_fit()</code> adds the model fit to a “model” object, as its component <code>fit</code> (if not already present).
The methods for classes “multimodel”  and “cv” similarly add the fitted models
to all included models.</p>
<p><code>has_fit()</code> is a generic function that discerns whether a (multi-)model contains the
corresponding fitted model(s).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fit</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for model</span></span>
<span><span class="fu">fit</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  eval <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_original_args <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for multimodel</span></span>
<span><span class="fu">fit</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  eval <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_original_args <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">which</span>,</span>
<span>  env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for cv</span></span>
<span><span class="fu">fit</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  eval <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_original_args <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">which</span>,</span>
<span>  env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_fit</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_fit</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for model_fm_glmnet</span></span>
<span><span class="fu">fit</span><span class="op">(</span><span class="va">x</span>, <span class="va">iter</span>, eval <span class="op">=</span> <span class="cn">TRUE</span>, force <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for model_fm_xgb</span></span>
<span><span class="fu">fit</span><span class="op">(</span><span class="va">x</span>, <span class="va">iter</span>, eval <span class="op">=</span> <span class="cn">TRUE</span>, force <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A “model” object</p></dd>


<dt>...</dt>
<dd><p>Passed to the model fitting function.</p></dd>


<dt>eval</dt>
<dd><p>Logical: If <code>FALSE</code>, the call to the model fitting function is returned, but not executed.</p></dd>


<dt>use_original_args</dt>
<dd><p>Logical: If <code>FALSE</code>, the model generating call is evaluated internally,
using the data (and potential additional objects) saved in <code>x</code>;
if <code>TRUE</code>, evaluation takes place in the calling environment of <code>fit()</code>, using the original input data.</p></dd>


<dt>force</dt>
<dd><p>Logical: If <code>FALSE</code> and a fitted model is present as the <code>fit</code> component of the model <code>x</code>,
then this fit is returned. If <code>force=TRUE</code>, the model will be re-fitted in any case.</p></dd>


<dt>env</dt>
<dd><p>An environment. Used for internal purposes.</p></dd>


<dt>which</dt>
<dd><p>Selection of one model: An integer value
or a logical vector of length <code>n_model(x)</code> having exactly one <code>TRUE</code>,
or a character value (selection by name, a model's <code>label</code>).
If <code>n_model(x)==1</code>, the only model is selected by default.</p></dd>


<dt>iter</dt>
<dd><p>iteration</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>fit()</code> returns a fitted model. <code>add_fit()</code> returns an object of class “<a href="model.html">model</a>”.
<code>has_fit()</code> returns a logical vector of length <code>n_model(x)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>fit()</code> is generic and has specific methods for classes “model_fm_glmnet” and “model_fm_xgb”.
See <code><a href="fm_glmnet.html">fm_glmnet</a></code>, <code><a href="fm_xgb.html">fm_xgb</a></code> and the examples below.</p>
<p>For <em>iteratively fitted models</em> (<a href="ifm.html">ifm</a>s, currently classes  “fm_xgb” and “fm_glmnet”),
<code>fit()</code> executes <code><a href="set_pref_iter.html">set_pref_iter</a>()</code> internally.
If there is information on the preferred iteration (from a cross-validation) attached to <code>x</code>,
the call to the model generating function is thereby adjusted.
To suppress this adjustment, run <code>fit()</code> with <code>iter=NULL</code>.</p>
<p>Another peculiarity of <code>fit(x)</code> when <code>x</code> is an IFM and has information on preferred iterations
comes into play when, in addition, <code>x</code> has a model fit attached to it (i.e. <code>has_fit(x)==TRUE</code>).
In this case, the fitted model is partially adapted according to the preferred iteration.
Specifically, the <code>pref_iter</code> is set in the fitted model and in the call
(and more parameters related to stopping or choice of iteration for predictions are modified).
The model fit attached to the output is improper in the sense that
it differs from what would result when you execute its call (but predictions are the same).
This default behavior can be suppressed by setting <code>force=TRUE</code>, which consequently increases execution time
by the time required to fit the model.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    

<ul><li><p><code>fit.model()</code> converts the “model” object <code>x</code> to a fitted model of class <code>x$class</code>.</p></li>
<li><p><code>fit.multimodel()</code> and <code>fit.cv()</code> extract a single model from <code>x</code> according to argument <code>which</code>
(see <code><a href="extract_model.html">extract_model</a>()</code>) and applies <code>fit.model()</code> to the result.</p></li>
<li><p><code>fit.model_fm_glmnet()</code> and <code>fit.model_fm_xgb()</code> are specific methods for these two model classes.
A special feature of these methods goes into action if <code>x</code> contains results on preferred iteration resulting from a cross-validation.
In that case the preferred iteration is selected from the cross-validation results
(see <code><a href="set_pref_iter.html">set_pref_iter</a>()</code>).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="model.html">model</a></code>; <code><a href="set_pref_iter.html">set_pref_iter</a></code>; <code><a href="fm_xgb.html">fm_xgb</a></code> and <code><a href="fm_glmnet.html">fm_glmnet</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Applying model() then fit() to a model returns the original model:</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="model.html">model</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Sepal.Width</span> <span class="op">~</span> <span class="va">.</span>, <span class="va">iris</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- A “model” object ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   label:          lm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   model class:    lm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   formula:        Sepal.Width ~ Sepal.Length + Petal.Length + Petal.Width + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   data:           data.frame [150 x 5], </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   input as: ‘data = iris’</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response_type:  continuous</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   call:           lm(formula = Sepal.Width ~ ., data = data)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fit:            Object of class ‘lm’</span>
<span class="r-in"><span><span class="fu">fit</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = Sepal.Width ~ ., data = iris)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       (Intercept)       Sepal.Length       Petal.Length        Petal.Width  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1.6572             0.3778            -0.1876             0.6257  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Speciesversicolor   Speciesvirginica  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           -1.1603            -1.3983  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Obtain the model call without executing it:</span></span></span>
<span class="r-in"><span><span class="fu">fit</span><span class="op">(</span><span class="va">mod</span>, eval <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = Sepal.Width ~ ., data = data)</span>
<span class="r-in"><span><span class="co"># Note the generic 'data=data' in the result</span></span></span>
<span class="r-in"><span><span class="co"># In order to obtain the original call, do:</span></span></span>
<span class="r-in"><span><span class="fu">fit</span><span class="op">(</span><span class="va">mod</span>, eval <span class="op">=</span> <span class="cn">FALSE</span>, use_original_args <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = Sepal.Width ~ ., data = iris)</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mathias Ambuehl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

