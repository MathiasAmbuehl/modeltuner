<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="set_metric is applied to an object x of class &amp;#8220;cv&amp;#8221; including one or several
cross-validated models. It changes the default metric of all models in x."><title>Change the default metric of a cv object — set_metric • modeltuner</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Change the default metric of a cv object — set_metric"><meta property="og:description" content="set_metric is applied to an object x of class &amp;#8220;cv&amp;#8221; including one or several
cross-validated models. It changes the default metric of all models in x."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">modeltuner</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/modeltuner.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ifm.html">Fitting and tuning Iteratively Fitted Models</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Change the default metric of a <code>cv</code> object</h1>
      
      <div class="d-none name"><code>set_metric.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>set_metric</code> is applied to an object <code>x</code> of class “cv” including one or several
cross-validated models. It changes the default metric of all models in <code>x</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_metric</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for cv</span></span>
<span><span class="fu">set_metric</span><span class="op">(</span><span class="va">x</span>, metric <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">metric</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, eval_weights <span class="op">=</span> <span class="st">"default"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>An object of class “cv”.</p></dd>


<dt>...</dt>
<dd><p>Passed to metric function.</p></dd>


<dt>metric</dt>
<dd><p>A metric (see <a href="metrics.html">metrics</a>).</p></dd>


<dt>eval_weights</dt>
<dd><p>Evaluation weights; see the “Evaluation weights” in the
“Details” section of <code><a href="modeltuner-package.html">?modeltuner</a></code>.
<code>"eval_weights=default</code> means “use fitting weights” while <code>"eval_weights=NULL</code>
means unweighted evaluation.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A (modified) object of class <code>cv</code>, with adapted metric.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Changing the metric is most useful when applied to models based on an iteratively fitted model (see <a href="ifm.html">ifm</a>).
In this case, the evaluation log is recalculated for the new metric and
the preference criteria are evaluated based on this updated log.
These computations are only possible when the input “cv” object contains the
cross-validation model fits, which requires that it has been generated in a
call <code><a href="cv.html">cv</a>(..., keep_fits = TRUE)</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="model.html">model</a></span><span class="op">(</span><span class="fu"><a href="fm_xgb.html">fm_xgb</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span><span class="va">.</span>, <span class="va">iris</span><span class="op">)</span>, max_depth <span class="op">=</span> <span class="fl">2</span>, </span></span>
<span class="r-in"><span>           label <span class="op">=</span> <span class="st">"xgb_model"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cvm</span> <span class="op">&lt;-</span> <span class="fu"><a href="cv.html">cv</a></span><span class="op">(</span><span class="va">m</span>, keep_fits <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  <span class="co"># keep_fits=TRUE is required here</span></span></span>
<span class="r-in"><span><span class="fu"><a href="cv_performance.html">cv_performance</a></span><span class="op">(</span><span class="va">cvm</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- Performance table ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Metric: rmse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           train_rmse test_rmse iteration time_cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xgb_model    0.23594   0.31776        29   0.112</span>
<span class="r-in"><span><span class="co"># change the metric</span></span></span>
<span class="r-in"><span><span class="va">cvm_medae</span> <span class="op">&lt;-</span> <span class="fu">set_metric</span><span class="op">(</span><span class="va">cvm</span>, <span class="st">"medae"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="cv_performance.html">cv_performance</a></span><span class="op">(</span><span class="va">cvm_medae</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- Performance table ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Metric: medae</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           train_medae test_medae iteration time_cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xgb_model     0.20527    0.24492        11   0.112</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mathias Ambuehl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

